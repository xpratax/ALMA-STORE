<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>ALMA STORE | Loja</title>
<!--gostou? segue no insta @vm_dantasxz-->
  <!--gostou? segue no insta @vm_dantasxz-->
  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    body {
      background: #0b0b10;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    .loja-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .loja-header h1 {
      font-size: 2.4rem;
      color: #8f7cff;
      margin: 0;
    }

    .produtos {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }

    .card {
      background: #12121a;
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 0 18px #8f7cff44;
      transition: transform .2s ease;
    }

    .card:hover {
      transform: translateY(-4px);
    }

    .card h3 {
      margin: 0 0 10px;
      font-size: 16px;
    }

    .preco {
      margin-top: 10px;
      font-weight: bold;
      color: #00ffcc;
      font-size: 15px;
    }

    .vazio {
      opacity: .6;
      text-align: center;
      margin-top: 40px;
    }
  </style>
</head>

<body>

  <div class="loja-header">
    <h1 id="nomeLoja">Carregando loja...</h1>
  </div>

  <div class="produtos" id="listaProdutos"></div>

<script>
/* üîë SUPABASE */
const SUPABASE_URL = "https://dzwerhytdemnwebqurau.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6d2VyaHl0ZGVtbndlYnF1cmF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY3NzQ5NzEsImV4cCI6MjA4MjM1MDk3MX0.m0ZEcR_A7uEMJ0ixVThqNcI0lLlc2vCQitcyjtT0MDM";

const supabaseClient = supabase.createClient(
  SUPABASE_URL,
  SUPABASE_ANON_KEY
);

/* üìå SLUG DA URL */
const params = new URLSearchParams(window.location.search);
const slug = params.get("slug");

if (!slug) {
  document.body.innerHTML = "<h2>Loja n√£o encontrada</h2>";
  throw new Error("Slug n√£o informado");
}
/*--gostou? segue no insta @vm_dantasxz-->
/* üè™ CARREGAR LOJA */
async function carregarLoja() {
  const { data: loja, error } = await supabaseClient
    .from("lojas")
    .select("id, nome")
    .eq("slug", slug)
    .single();

  if (error || !loja) {
    document.body.innerHTML = "<h2>Loja n√£o encontrada</h2>";
    return;
  }

  document.getElementById("nomeLoja").innerText = loja.nome;
  carregarProdutos(loja.id);
}

/* üõí CARREGAR PRODUTOS */
async function carregarProdutos(lojaId) {
  const { data: produtos, error } = await supabaseClient
    .from("produtos_geral")
    .select("nome, preco")
    .eq("loja_id", lojaId)
    .eq("status", "permitido");

  if (error) {
    console.error(error);
    return;
  }

  const box = document.getElementById("listaProdutos");
  box.innerHTML = "";

  if (!produtos || produtos.length === 0) {
    box.innerHTML = `<div class="vazio">Nenhum produto dispon√≠vel</div>`;
    return;
  }

  produtos.forEach(p => {
    const precoFormatado =
      p.preco !== null
        ? Number(p.preco).toFixed(2).replace(".", ",")
        : "0,00";

    box.innerHTML += `
      <div class="card">
        <h3>${p.nome}</h3>
        <div class="preco">R$ ${precoFormatado}</div>
      </div>
    `;
  });
}

carregarLoja();
</script>

</body>
</html>
<!--gostou? segue no insta @vm_dantasxz-->
